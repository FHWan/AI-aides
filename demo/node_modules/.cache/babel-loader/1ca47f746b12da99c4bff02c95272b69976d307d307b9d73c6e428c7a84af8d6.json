{"ast":null,"code":"import \"core-js/modules/es.array-buffer.detached.js\";\nimport \"core-js/modules/es.array-buffer.transfer.js\";\nimport \"core-js/modules/es.array-buffer.transfer-to-fixed-length.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.reduce.js\";\nimport \"core-js/modules/es.typed-array.to-reversed.js\";\nimport \"core-js/modules/es.typed-array.to-sorted.js\";\nimport \"core-js/modules/es.typed-array.with.js\";\n// ÂºïÂÖ•ÂøÖË¶ÅÁöÑÂ∫ì\nimport * as PIXI from 'pixi.js';\nimport { Live2DModel } from 'pixi-live2d-display/cubism4';\nwindow.PIXI = PIXI; // ‰∏∫‰∫Üpixi-live2d-displayÂÜÖÈÉ®Ë∞ÉÁî®\nlet app; // Áî®‰∫éÂ≠òÂÇ®pixiÂÆû‰æã\n//let model; // Áî®‰∫éÂ≠òÂÇ®live2dÂÆû‰æã\n\nexport default {\n  data() {\n    return {\n      userQuestion: '',\n      aiResponse: '',\n      ws: null,\n      audioUrl: '',\n      fullResponse: '',\n      // Êñ∞Â¢ûÔºöÁî®‰∫éÁ¥ØÁßØÂÆåÊï¥ÂìçÂ∫î\n      model: null // Â∞ÜmodelÁßªÂà∞data‰∏≠‰ª•‰æøVueÂìçÂ∫îÂºèÁÆ°ÁêÜ\n    };\n  },\n  async mounted() {\n    app = new PIXI.Application({\n      view: this.$refs.liveCanvas,\n      // refÁªÑ‰ª∂ÁªëÂÆöÔºåliveCanvas‰∏∫‰∏ãÊñáËá™ÂÆö‰πâÁöÑ\n      autoStart: true,\n      // ÊòØÂê¶ÂºÄÂêØËá™Âä®Êí≠Êîæ\n      resizeTo: window,\n      backgroundAlpha: 0 // ÈÄèÊòéÂ∫¶\n    });\n\n    // Â∞ÜmodelÂÆû‰æã‰øùÂ≠òÂà∞ÁªÑ‰ª∂data‰∏≠\n    this.model = await Live2DModel.from('character/U.model3.json', {\n      // Â±ïÁ§∫Â∑•ÂÖ∑ÁÆ±ÔºàÂèØ‰ª•ÊéßÂà∂ live2d ÁöÑÂ±ïÂá∫ÈöêËóèÔºå‰ΩøÁî®ÁâπÂÆöË°®ÊÉÖÔºâ\n      ShowToolBox: false,\n      // ÊòØÂê¶‰ΩøÁî® indexDB ËøõË°åÁºìÂ≠ò‰ºòÂåñÔºåËøôÊ†∑‰∏ã‰∏ÄÊ¨°ËΩΩÂÖ•Â∞±‰∏ç‰ºöÂÜçÂèëËµ∑ÁΩëÁªúËØ∑Ê±Ç‰∫Ü\n      LoadFromCache: true,\n      autoInteract: false // ÂÖ≥Èó≠ÁúºÁùõËá™Âä®Ë∑üÈöèÂäüËÉΩ\n    });\n    this.model.x = 500;\n    this.model.y = 100;\n    this.model.scale.set(1);\n    app.stage.addChild(this.model);\n    this.model.expression('Ê°å');\n\n    // Ê≥®ÂÜåÈº†Ê†áÊåâ‰∏ãÂíåÊùæÂºÄ‰∫ã‰ª∂\n    window.addEventListener('mousedown', this.handleMouseDown);\n    window.addEventListener('mouseup', this.handleMouseUp);\n  },\n  beforeUnmount() {\n    // Âú®ÁªÑ‰ª∂ÈîÄÊØÅ‰πãÂâçÔºåÁßªÈô§‰∫ã‰ª∂ÁõëÂê¨Âô®\n    window.removeEventListener('mousedown', this.handleMouseDown);\n    window.removeEventListener('mouseup', this.handleMouseUp);\n  },\n  methods: {\n    // Â§ÑÁêÜÈº†Ê†áÊåâ‰∏ã‰∫ã‰ª∂\n    handleMouseDown() {\n      if (this.model) {\n        this.model.autoInteract = true; // Èº†Ê†áÂ∑¶ÈîÆÊåâ‰∏ãÊó∂ÔºåÂêØÁî®autoInteract\n      }\n    },\n    // Â§ÑÁêÜÈº†Ê†áÊùæÂºÄ‰∫ã‰ª∂\n    handleMouseUp() {\n      if (this.model) {\n        this.model.autoInteract = false; // Èº†Ê†áÂ∑¶ÈîÆÊùæÂºÄÊó∂ÔºåÁ¶ÅÁî®autoInteract\n      }\n    },\n    // Êñ∞Â¢ûË°®ÊÉÖÂàáÊç¢ÊñπÊ≥ï\n    changeExpression(text) {\n      if (this.model) {\n        this.model.expression(text);\n      }\n    },\n    change_test() {\n      setInterval(() => {\n        let n = Math.random();\n        console.log(\"ÈöèÊú∫Êï∞0~1ÊéßÂà∂Âò¥Â∑¥YËΩ¥È´òÂ∫¶-->\", n);\n        this.model.internalModel.coreModel.setParameterValueById(\"ParamMouthOpenY\", n);\n      }, 100);\n    },\n    async sendQuestion(e) {\n      e.preventDefault();\n      if (!this.userQuestion.trim()) return;\n\n      // Ê∏ÖÁ©∫‰πãÂâçÁöÑÂõûÂ§ç\n      this.aiResponse = ''; // Ê∏ÖÁ©∫ÂìçÂ∫îÂÜÖÂÆπ\n\n      // Á°Æ‰øùËøûÊé•ÂèØÁî®\n      if (!this.ws || this.ws.readyState === WebSocket.CLOSED) {\n        await this.initWebSocket();\n      }\n\n      // Á°Æ‰øùËøûÊé•Â∑≤Âª∫Á´ã\n      if (this.ws.readyState === WebSocket.CONNECTING) {\n        await new Promise(resolve => {\n          this.ws.addEventListener('open', resolve);\n        });\n      }\n\n      // ÂèëÈÄÅÊ∂àÊÅØ\n      if (this.ws.readyState === WebSocket.OPEN) {\n        this.ws.send(this.userQuestion);\n        this.userQuestion = '';\n      } else {\n        console.error('WebSocketËøûÊé•ÂºÇÂ∏∏Áä∂ÊÄÅ:', this.ws.readyState);\n        this.aiResponse = \"ËøûÊé•ÂºÇÂ∏∏ÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï\";\n      }\n    },\n    initWebSocket() {\n      return new Promise(resolve => {\n        if (this.ws) {\n          this.ws.close(); // ÂÖ≥Èó≠ÊóßËøûÊé•\n        }\n        this.ws = new WebSocket('ws://localhost:4600/question');\n\n        // ‰øÆÊîπÂêéÁöÑÊ∂àÊÅØÁõëÂê¨\n        this.ws.addEventListener('message', event => {\n          const response = JSON.parse(event.data);\n\n          // Â§ÑÁêÜÈîôËØØÊÉÖÂÜµ\n          if (response.error) {\n            this.aiResponse = response.error;\n            return;\n          }\n\n          // Â¶ÇÊûúÊòØÁ¨¨‰∏ÄÊ¨°Êî∂Âà∞ÂõûÂ§çÔºåÂàáÊç¢‰∏∫‚ÄúÊï≤ÈîÆÁõò‚ÄùË°®ÊÉÖ\n          if (this.aiResponse === '') {\n            this.model.expression('Êï≤ÈîÆÁõò'); // ÂºÄÂßãÂõûÂ§çÊó∂ÂàáÊç¢Ë°®ÊÉÖ\n          }\n\n          // Á¥ØÁßØÂìçÂ∫îÂÜÖÂÆπ\n          if (response.data) {\n            this.aiResponse += response.data;\n            this.fullResponse += response.data; // Á¥ØÁßØÂÆåÊï¥ÂìçÂ∫î\n          }\n\n          // Ëá™Âä®ÊªöÂä®\n          this.$nextTick(() => {\n            const textarea = this.$el.querySelector('.response-textarea');\n            textarea.scrollTop = textarea.scrollHeight;\n          });\n\n          // Êñ∞Â¢ûÔºö‰ªÖÂú®Êî∂Âà∞ÁªìÊùüÊ†áËÆ∞Êó∂Ëß¶ÂèëËØ≠Èü≥ÂêàÊàê\n          if (response.isEnd) {\n            const cleanText = this.fullResponse.replace(/<think>[\\s\\S]*?<\\/think>/g, '').replace(/[A-Za-z*#]/g, '').trim();\n            if (cleanText) {\n              this.convertTextToSpeech(cleanText);\n            }\n            this.fullResponse = ''; // Ê∏ÖÁ©∫Á¥ØÁßØÂÜÖÂÆπ\n            // ÂõûÂ§çÂÆåÂÖ®ÁªìÊùüÔºåÂàáÊç¢‰∏∫‚ÄúÊ°å‚ÄùË°®ÊÉÖ\n            this.model.expression('Ê°å');\n          }\n        });\n        this.ws.addEventListener('open', () => {\n          console.log('WebSocketËøûÊé•Â∑≤Âª∫Á´ã');\n          resolve();\n        });\n\n        // ÈîôËØØÂ§ÑÁêÜÂ¢ûÂº∫\n        this.ws.addEventListener('error', error => {\n          console.error('WebSocketÈîôËØØ:', error);\n          this.aiResponse = \"ËøûÊé•Âá∫Áé∞ÈîôËØØÔºåËØ∑Ê£ÄÊü•ÊéßÂà∂Âè∞\";\n        });\n\n        // ÂÖ≥Èó≠Â§ÑÁêÜ\n        this.ws.addEventListener('close', () => {\n          console.log('WebSocketËøûÊé•Â∑≤ÂÖ≥Èó≠');\n          this.ws = null; // ÈáçË¶ÅÔºÅÈáçÁΩÆËøûÊé•ÂÆû‰æã\n        });\n      });\n    },\n    // ‰øÆÊîπÂêéÁöÑËØ≠Èü≥ÂêàÊàêÊñπÊ≥ï\n    async convertTextToSpeech(text) {\n      try {\n        const response = await fetch(`http://localhost:4500/generate-tts?text=${encodeURIComponent(text)}`);\n        const data = await response.json();\n        if (data.audioUrl) {\n          this.playAudio(data.audioUrl);\n        } else {\n          console.error('Èü≥È¢ëÁîüÊàêÂ§±Ë¥•:', data.error);\n        }\n      } catch (error) {\n        console.error('ËØ≠Èü≥ËΩ¨Êç¢ÈîôËØØ:', error);\n        this.aiResponse += '\\n[ËØ≠Èü≥ËΩ¨Êç¢Â§±Ë¥•]';\n      }\n    },\n    playAudio(audioUrl) {\n      // ÂàõÂª∫Èü≥È¢ë‰∏ä‰∏ãÊñá\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n\n      // Ëé∑ÂèñÈü≥È¢ëÊï∞ÊçÆ\n      fetch(audioUrl).then(response => response.arrayBuffer()).then(audioData => audioContext.decodeAudioData(audioData)).then(audioBuffer => {\n        // ÂàõÂª∫Èü≥È¢ëËäÇÁÇπ\n        const source = audioContext.createBufferSource();\n        const analyser = audioContext.createAnalyser();\n\n        // ÈÖçÁΩÆÂàÜÊûêÂô®\n        analyser.fftSize = 256;\n        source.buffer = audioBuffer;\n\n        // ËøûÊé•Èü≥È¢ëËäÇÁÇπ\n        source.connect(analyser);\n        analyser.connect(audioContext.destination);\n\n        // ÂàùÂßãÂåñÂä®ÁîªÂèÇÊï∞\n        let requestId = null;\n        const dataArray = new Uint8Array(analyser.frequencyBinCount);\n\n        // ÂêØÂä®Èü≥È¢ëÊí≠Êîæ\n        source.start(0);\n\n        // ÂàõÂª∫Âä®ÁîªÂæ™ÁéØ\n        const updateMouth = () => {\n          analyser.getByteFrequencyData(dataArray);\n\n          // ËÆ°ÁÆóÂπ≥ÂùáÈü≥Èáè\n          const volume = dataArray.reduce((a, b) => a + b) / dataArray.length;\n          const mouthOpen = Math.min(1, volume / 180); // Ë∞ÉÊï¥Èô§Êï∞ÂèØÊîπÂèòÁÅµÊïèÂ∫¶\n\n          // Êõ¥Êñ∞Ê®°ÂûãÂèÇÊï∞\n          this.model.internalModel.coreModel.setParameterValueById(\"ParamMouthOpenY\", mouthOpen);\n          requestId = requestAnimationFrame(updateMouth);\n        };\n\n        // ÂêØÂä®Âä®Áîª\n        requestId = requestAnimationFrame(updateMouth);\n\n        // Èü≥È¢ëÁªìÊùüÊó∂Ê∏ÖÁêÜ\n        source.onended = () => {\n          cancelAnimationFrame(requestId);\n          this.model.internalModel.coreModel.setParameterValueById(\"ParamMouthOpenY\", 0);\n          audioContext.close();\n        };\n      }).catch(error => {\n        console.error('Èü≥È¢ëÂ§ÑÁêÜÈîôËØØ:', error);\n        this.model.internalModel.coreModel.setParameterValueById(\"ParamMouthOpenY\", 0);\n      });\n    }\n  }\n};","map":{"version":3,"names":["PIXI","Live2DModel","window","app","data","userQuestion","aiResponse","ws","audioUrl","fullResponse","model","mounted","Application","view","$refs","liveCanvas","autoStart","resizeTo","backgroundAlpha","from","ShowToolBox","LoadFromCache","autoInteract","x","y","scale","set","stage","addChild","expression","addEventListener","handleMouseDown","handleMouseUp","beforeUnmount","removeEventListener","methods","changeExpression","text","change_test","setInterval","n","Math","random","console","log","internalModel","coreModel","setParameterValueById","sendQuestion","e","preventDefault","trim","readyState","WebSocket","CLOSED","initWebSocket","CONNECTING","Promise","resolve","OPEN","send","error","close","event","response","JSON","parse","$nextTick","textarea","$el","querySelector","scrollTop","scrollHeight","isEnd","cleanText","replace","convertTextToSpeech","fetch","encodeURIComponent","json","playAudio","audioContext","AudioContext","webkitAudioContext","then","arrayBuffer","audioData","decodeAudioData","audioBuffer","source","createBufferSource","analyser","createAnalyser","fftSize","buffer","connect","destination","requestId","dataArray","Uint8Array","frequencyBinCount","start","updateMouth","getByteFrequencyData","volume","reduce","a","b","length","mouthOpen","min","requestAnimationFrame","onended","cancelAnimationFrame","catch"],"sources":["/home/fan/docker_image/live2d/demo/src/App.vue"],"sourcesContent":["<script>\n// ÂºïÂÖ•ÂøÖË¶ÅÁöÑÂ∫ì\nimport * as PIXI from 'pixi.js';\nimport { Live2DModel } from 'pixi-live2d-display/cubism4';\nwindow.PIXI = PIXI; // ‰∏∫‰∫Üpixi-live2d-displayÂÜÖÈÉ®Ë∞ÉÁî®\nlet app; // Áî®‰∫éÂ≠òÂÇ®pixiÂÆû‰æã\n//let model; // Áî®‰∫éÂ≠òÂÇ®live2dÂÆû‰æã\n\nexport default {\n  data() {\n    return {\n      userQuestion: '',\n      aiResponse: '',\n      ws: null,\n      audioUrl: '',\n      fullResponse: '', // Êñ∞Â¢ûÔºöÁî®‰∫éÁ¥ØÁßØÂÆåÊï¥ÂìçÂ∫î\n      model: null, // Â∞ÜmodelÁßªÂà∞data‰∏≠‰ª•‰æøVueÂìçÂ∫îÂºèÁÆ°ÁêÜ\n    };\n  },\n\n  async mounted() {\n    app = new PIXI.Application({\n      view: this.$refs.liveCanvas, // refÁªÑ‰ª∂ÁªëÂÆöÔºåliveCanvas‰∏∫‰∏ãÊñáËá™ÂÆö‰πâÁöÑ\n      autoStart: true,             // ÊòØÂê¶ÂºÄÂêØËá™Âä®Êí≠Êîæ\n      resizeTo: window,\n      backgroundAlpha: 0,         // ÈÄèÊòéÂ∫¶\n    });\n\n    // Â∞ÜmodelÂÆû‰æã‰øùÂ≠òÂà∞ÁªÑ‰ª∂data‰∏≠\n    this.model = await Live2DModel.from('character/U.model3.json',{\n      // Â±ïÁ§∫Â∑•ÂÖ∑ÁÆ±ÔºàÂèØ‰ª•ÊéßÂà∂ live2d ÁöÑÂ±ïÂá∫ÈöêËóèÔºå‰ΩøÁî®ÁâπÂÆöË°®ÊÉÖÔºâ\n      ShowToolBox: false,\n\n    // ÊòØÂê¶‰ΩøÁî® indexDB ËøõË°åÁºìÂ≠ò‰ºòÂåñÔºåËøôÊ†∑‰∏ã‰∏ÄÊ¨°ËΩΩÂÖ•Â∞±‰∏ç‰ºöÂÜçÂèëËµ∑ÁΩëÁªúËØ∑Ê±Ç‰∫Ü\n      LoadFromCache: true,\n      autoInteract: false, // ÂÖ≥Èó≠ÁúºÁùõËá™Âä®Ë∑üÈöèÂäüËÉΩ\n    });\n    this.model.x = 500;\n    this.model.y = 100;\n    this.model.scale.set(1);\n    app.stage.addChild(this.model);\n    this.model.expression('Ê°å');\n\n        // Ê≥®ÂÜåÈº†Ê†áÊåâ‰∏ãÂíåÊùæÂºÄ‰∫ã‰ª∂\n    window.addEventListener('mousedown', this.handleMouseDown);\n    window.addEventListener('mouseup', this.handleMouseUp);\n  },\n\n  beforeUnmount() {\n    // Âú®ÁªÑ‰ª∂ÈîÄÊØÅ‰πãÂâçÔºåÁßªÈô§‰∫ã‰ª∂ÁõëÂê¨Âô®\n    window.removeEventListener('mousedown', this.handleMouseDown);\n    window.removeEventListener('mouseup', this.handleMouseUp);\n  },\n\n  methods: {\n\n    // Â§ÑÁêÜÈº†Ê†áÊåâ‰∏ã‰∫ã‰ª∂\n    handleMouseDown() {\n      if (this.model) {\n        this.model.autoInteract = true; // Èº†Ê†áÂ∑¶ÈîÆÊåâ‰∏ãÊó∂ÔºåÂêØÁî®autoInteract\n      }\n    },\n\n    // Â§ÑÁêÜÈº†Ê†áÊùæÂºÄ‰∫ã‰ª∂\n    handleMouseUp() {\n      if (this.model) {\n        this.model.autoInteract = false; // Èº†Ê†áÂ∑¶ÈîÆÊùæÂºÄÊó∂ÔºåÁ¶ÅÁî®autoInteract\n      }\n    },\n\n    // Êñ∞Â¢ûË°®ÊÉÖÂàáÊç¢ÊñπÊ≥ï\n    changeExpression(text) {\n      if (this.model) {\n        this.model.expression(text);\n      }\n    },\n\n    change_test() {\n      setInterval(() => {\n        let n = Math.random();\n        console.log(\"ÈöèÊú∫Êï∞0~1ÊéßÂà∂Âò¥Â∑¥YËΩ¥È´òÂ∫¶-->\", n);\n        this.model.internalModel.coreModel.setParameterValueById(\"ParamMouthOpenY\", n);\n      }, 100);\n    },\n\n    async sendQuestion(e) {\n      e.preventDefault();\n      if (!this.userQuestion.trim()) return;\n\n      // Ê∏ÖÁ©∫‰πãÂâçÁöÑÂõûÂ§ç\n      this.aiResponse = ''; // Ê∏ÖÁ©∫ÂìçÂ∫îÂÜÖÂÆπ\n\n      // Á°Æ‰øùËøûÊé•ÂèØÁî®\n      if (!this.ws || this.ws.readyState === WebSocket.CLOSED) {\n        await this.initWebSocket();\n      }\n\n      // Á°Æ‰øùËøûÊé•Â∑≤Âª∫Á´ã\n      if (this.ws.readyState === WebSocket.CONNECTING) {\n        await new Promise((resolve) => {\n          this.ws.addEventListener('open', resolve);\n        });\n      }\n\n      // ÂèëÈÄÅÊ∂àÊÅØ\n      if (this.ws.readyState === WebSocket.OPEN) {\n        this.ws.send(this.userQuestion);\n        this.userQuestion = '';\n      } else {\n        console.error('WebSocketËøûÊé•ÂºÇÂ∏∏Áä∂ÊÄÅ:', this.ws.readyState);\n        this.aiResponse = \"ËøûÊé•ÂºÇÂ∏∏ÔºåËØ∑Âà∑Êñ∞È°µÈù¢ÈáçËØï\";\n      }\n    },\n\n    initWebSocket() {\n      return new Promise((resolve) => {\n        if (this.ws) {\n          this.ws.close(); // ÂÖ≥Èó≠ÊóßËøûÊé•\n        }\n\n        this.ws = new WebSocket('ws://localhost:4600/question');\n        \n         // ‰øÆÊîπÂêéÁöÑÊ∂àÊÅØÁõëÂê¨\n         this.ws.addEventListener('message', (event) => {\n          const response = JSON.parse(event.data);\n          \n          // Â§ÑÁêÜÈîôËØØÊÉÖÂÜµ\n          if (response.error) {\n            this.aiResponse = response.error;\n            return;\n          }\n          \n          // Â¶ÇÊûúÊòØÁ¨¨‰∏ÄÊ¨°Êî∂Âà∞ÂõûÂ§çÔºåÂàáÊç¢‰∏∫‚ÄúÊï≤ÈîÆÁõò‚ÄùË°®ÊÉÖ\n          if (this.aiResponse === '') {\n            this.model.expression('Êï≤ÈîÆÁõò');  // ÂºÄÂßãÂõûÂ§çÊó∂ÂàáÊç¢Ë°®ÊÉÖ\n          }\n\n          // Á¥ØÁßØÂìçÂ∫îÂÜÖÂÆπ\n          if (response.data) {\n            this.aiResponse += response.data;\n            this.fullResponse += response.data; // Á¥ØÁßØÂÆåÊï¥ÂìçÂ∫î\n          }\n\n          // Ëá™Âä®ÊªöÂä®\n          this.$nextTick(() => {\n            const textarea = this.$el.querySelector('.response-textarea');\n            textarea.scrollTop = textarea.scrollHeight;\n          });\n\n          // Êñ∞Â¢ûÔºö‰ªÖÂú®Êî∂Âà∞ÁªìÊùüÊ†áËÆ∞Êó∂Ëß¶ÂèëËØ≠Èü≥ÂêàÊàê\n          if (response.isEnd) {\n            const cleanText = this.fullResponse\n              .replace(/<think>[\\s\\S]*?<\\/think>/g, '')\n              .replace(/[A-Za-z*#]/g, '')\n              .trim();\n\n            if (cleanText) {\n              this.convertTextToSpeech(cleanText);\n            }\n            \n            this.fullResponse = ''; // Ê∏ÖÁ©∫Á¥ØÁßØÂÜÖÂÆπ\n            // ÂõûÂ§çÂÆåÂÖ®ÁªìÊùüÔºåÂàáÊç¢‰∏∫‚ÄúÊ°å‚ÄùË°®ÊÉÖ\n            this.model.expression('Ê°å');\n          }\n        });\n        \n        this.ws.addEventListener('open', () => {\n          console.log('WebSocketËøûÊé•Â∑≤Âª∫Á´ã');\n          resolve();\n        });\n\n        // ÈîôËØØÂ§ÑÁêÜÂ¢ûÂº∫\n        this.ws.addEventListener('error', (error) => {\n          console.error('WebSocketÈîôËØØ:', error);\n          this.aiResponse = \"ËøûÊé•Âá∫Áé∞ÈîôËØØÔºåËØ∑Ê£ÄÊü•ÊéßÂà∂Âè∞\";\n        });\n\n        // ÂÖ≥Èó≠Â§ÑÁêÜ\n        this.ws.addEventListener('close', () => {\n          console.log('WebSocketËøûÊé•Â∑≤ÂÖ≥Èó≠');\n          this.ws = null; // ÈáçË¶ÅÔºÅÈáçÁΩÆËøûÊé•ÂÆû‰æã\n        });\n      });\n    },\n    \n    // ‰øÆÊîπÂêéÁöÑËØ≠Èü≥ÂêàÊàêÊñπÊ≥ï\n    async convertTextToSpeech(text) {\n      try {\n        const response = await fetch(\n          `http://localhost:4500/generate-tts?text=${encodeURIComponent(text)}`\n        );\n        const data = await response.json();\n        \n        if (data.audioUrl) {\n          this.playAudio(data.audioUrl);\n        } else {\n          console.error('Èü≥È¢ëÁîüÊàêÂ§±Ë¥•:', data.error);\n        }\n      } catch (error) {\n        console.error('ËØ≠Èü≥ËΩ¨Êç¢ÈîôËØØ:', error);\n        this.aiResponse += '\\n[ËØ≠Èü≥ËΩ¨Êç¢Â§±Ë¥•]';\n      }\n    },\n\n    playAudio(audioUrl) {\n      // ÂàõÂª∫Èü≥È¢ë‰∏ä‰∏ãÊñá\n      const audioContext = new (window.AudioContext || window.webkitAudioContext)();\n      \n      // Ëé∑ÂèñÈü≥È¢ëÊï∞ÊçÆ\n      fetch(audioUrl)\n        .then(response => response.arrayBuffer())\n        .then(audioData => audioContext.decodeAudioData(audioData))\n        .then(audioBuffer => {\n          // ÂàõÂª∫Èü≥È¢ëËäÇÁÇπ\n          const source = audioContext.createBufferSource();\n          const analyser = audioContext.createAnalyser();\n          \n          // ÈÖçÁΩÆÂàÜÊûêÂô®\n          analyser.fftSize = 256;\n          source.buffer = audioBuffer;\n          \n          // ËøûÊé•Èü≥È¢ëËäÇÁÇπ\n          source.connect(analyser);\n          analyser.connect(audioContext.destination);\n          \n          // ÂàùÂßãÂåñÂä®ÁîªÂèÇÊï∞\n          let requestId = null;\n          const dataArray = new Uint8Array(analyser.frequencyBinCount);\n\n          // ÂêØÂä®Èü≥È¢ëÊí≠Êîæ\n          source.start(0);\n\n          // ÂàõÂª∫Âä®ÁîªÂæ™ÁéØ\n          const updateMouth = () => {\n            analyser.getByteFrequencyData(dataArray);\n            \n            // ËÆ°ÁÆóÂπ≥ÂùáÈü≥Èáè\n            const volume = dataArray.reduce((a, b) => a + b) / dataArray.length;\n            const mouthOpen = Math.min(1, volume / 180); // Ë∞ÉÊï¥Èô§Êï∞ÂèØÊîπÂèòÁÅµÊïèÂ∫¶\n            \n            // Êõ¥Êñ∞Ê®°ÂûãÂèÇÊï∞\n            this.model.internalModel.coreModel.setParameterValueById(\n              \"ParamMouthOpenY\",\n              mouthOpen\n            );\n            \n            requestId = requestAnimationFrame(updateMouth);\n          };\n\n          // ÂêØÂä®Âä®Áîª\n          requestId = requestAnimationFrame(updateMouth);\n\n          // Èü≥È¢ëÁªìÊùüÊó∂Ê∏ÖÁêÜ\n          source.onended = () => {\n            cancelAnimationFrame(requestId);\n            this.model.internalModel.coreModel.setParameterValueById(\n              \"ParamMouthOpenY\",\n              0\n            );\n            audioContext.close();\n          };\n        })\n        .catch(error => {\n          console.error('Èü≥È¢ëÂ§ÑÁêÜÈîôËØØ:', error);\n          this.model.internalModel.coreModel.setParameterValueById(\n            \"ParamMouthOpenY\",\n            0\n          );\n        });\n    }\n  }\n}\n</script>\n\n<template>\n  <div class=\"app\">\n    <!-- Ëá™ÂÆö‰πâref=\"liveCanvas\"Ôºö -->\n    <canvas ref=\"liveCanvas\"></canvas>\n\n    <!-- Áî®Êà∑ËæìÂÖ•Ê°Ü -->\n      <textarea\n        v-model=\"userQuestion\"\n        class=\"transparent-textarea\"\n        placeholder=\"ËæìÂÖ•‰Ω†ÁöÑÈóÆÈ¢ò...\"\n        @keydown.enter=\"sendQuestion\"\n      ></textarea>\n    \n    <button \n        class=\"send-button\"\n        @click=\"sendQuestion\"\n        :disabled=\"!userQuestion.trim()\"\n      >\n        <span v-show=\"!isSending\">ÂèëÈÄÅ</span>\n        <div v-show=\"isSending\" class=\"loading-dots\">\n          <div class=\"dot\"></div>\n          <div class=\"dot\"></div>\n          <div class=\"dot\"></div>\n        </div>\n      </button>\n\n    <!-- AIÂìçÂ∫îÂ±ïÁ§∫ -->\n    <textarea\n      :value=\"aiResponse\"\n      class=\"response-textarea\"\n      placeholder=\"AIÁöÑÂõûÂ§ç...\"\n      readonly\n    ></textarea>\n\n    <!-- Êñ∞Â¢ûË°®ÊÉÖÂàáÊç¢ÊåâÈíÆ -->\n    <button \n      class=\"expression-btn_1\"\n      @click=\"changeExpression('Ê°å')\"\n      v-if=\"model\" \n    >\n      ÈáçÁΩÆË°®ÊÉÖüòÄ\n    </button>\n\n      <button \n      class=\"expression-btn_2\"\n      @click=\"changeExpression()\"\n      v-if=\"model\" \n    >\n      ÈöèÊú∫Ë°®ÊÉÖü§©\n    </button>\n\n    <button \n      class=\"expression-btn_3\"\n      @click=\"change_test()\"\n      v-if=\"model\" \n    >\n      ÊµãËØïÊåâÈíÆ\n    </button>\n  </div>\n</template>\n\n<style scoped>\n.app {\n  background-image: url('/public/picture/behind02.jpg'); /* ËÆæÁΩÆËÉåÊôØÂõæÁâá */\n  background-size: cover; /* Á°Æ‰øùÂõæÁâáË¶ÜÁõñÊï¥‰∏™ÂÆπÂô® */\n  background-position: center; /* Â±Ö‰∏≠ÊòæÁ§∫ÂõæÁâá */\n  background-attachment: fixed; /* ËÉåÊôØÂõ∫ÂÆö */\n  height: 100vh; /* È´òÂ∫¶ËÆæÁΩÆ‰∏∫ËßÜÂè£È´òÂ∫¶ÔºåÁ°Æ‰øùËÉåÊôØË¶ÜÁõñÊï¥‰∏™È°µÈù¢ */\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: relative; /* ‰ΩøÂæóÂèØ‰ª•Áõ∏ÂØπÂÆö‰ΩçÂÖ∂‰ªñÂÖÉÁ¥† */\n}\n\n\n/* Êñ∞Â¢ûËæìÂÖ•ÂÆπÂô®Ê†∑Âºè */\n.input-container {\n  position: absolute;\n  bottom: 7%;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  gap: 10px;\n  width: 60%;\n  min-width: 500px;\n  max-width: 800px;\n}\n\n/* Ë∞ÉÊï¥ÂéüËæìÂÖ•Ê°ÜÊ†∑Âºè */\n.transparent-textarea {\n  width: 100%;\n  min-height: 100px;\n  margin: 0; /* ÁßªÈô§ÂéüÊúâÂÆö‰ΩçÊ†∑Âºè */\n}\n\n/* Êñ∞Â¢ûÂèëÈÄÅÊåâÈíÆÊ†∑Âºè */\n.send-button {\n  flex-shrink: 0;\n  width: 100px;\n  height: 100px;\n  background: linear-gradient(135deg, #6ab0f0 0%, #4a90e2 100%);\n  border: none;\n  border-radius: 15px;\n  color: white;\n  font-size: 18px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.send-button:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 8px rgba(0, 0, 0, 0.2);\n}\n\n.send-button:disabled {\n  background: #cccccc;\n  cursor: not-allowed;\n  opacity: 0.7;\n}\n\n/* Âä†ËΩΩÂä®Áîª */\n.loading-dots {\n  display: flex;\n  gap: 6px;\n}\n\n.dot {\n  width: 8px;\n  height: 8px;\n  background: white;\n  border-radius: 50%;\n  animation: dot-pulse 1.4s infinite ease-in-out;\n}\n\n.dot:nth-child(2) {\n  animation-delay: 0.2s;\n}\n\n.dot:nth-child(3) {\n  animation-delay: 0.4s;\n}\n\n@keyframes dot-pulse {\n  0%, 80%, 100% { \n    transform: scale(0.5);\n  }  \n  40% {\n    transform: scale(1);\n  }\n}\n\n\n.response-textarea {\n  position: absolute;\n  right: 4%; /* ËÆæÁΩÆË∑ùÁ¶ªÈ°µÈù¢Âè≥‰æßÁöÑË∑ùÁ¶ª */\n  top: 20%; /* ËÆæÁΩÆË∑ùÁ¶ªÈ°µÈù¢È°∂ÈÉ®ÁöÑË∑ùÁ¶ª */\n  padding: 10px;\n  font-size: 16px;\n  background-color: rgba(255, 255, 255, 0.8); /* ËÉåÊôØÈÄèÊòéÂ∫¶50% */\n  border: 1px solid rgba(0, 0, 0, 0.3); /* ËæπÊ°ÜÁ®çÂæÆÈÄèÊòé */\n  border-radius: 5px; /* ÂúÜËßí */\n  color: #333; /* ÊñáÊú¨È¢úËâ≤ */\n  width: 25%; /* ÂÆΩÂ∫¶ÂèØ‰ª•Ê†πÊçÆÈúÄË¶ÅË∞ÉÊï¥ */\n  min-height: 400px; /* ËÆæÁΩÆÊúÄÂ∞èÈ´òÂ∫¶ */\n  resize: none; /* Á¶ÅÊ≠¢Áî®Êà∑Ë∞ÉÊï¥ÊñáÊú¨Ê°ÜÂ§ßÂ∞è */\n  overflow: auto; /* ÂÜÖÂÆπÊ∫¢Âá∫Êó∂ÊòæÁ§∫ÊªöÂä®Êù° */\n  white-space: pre-wrap; /* ‰øùËØÅÊñáÊú¨Âú®ÈÅáÂà∞ÈïøÂçïËØçÊàñÈìæÊé•Êó∂Ëá™Âä®Êç¢Ë°å */\n}\n\n.expression-btn_1 {\n  position: absolute;\n  right: 18.1%;\n  top: 63%;\n  padding: 12px 24px;\n  font-size: 20px;\n  width: 12%;\n  background-color: rgba(106, 240, 128, 0.9);\n  border: none;\n  border-radius: 25px;\n  color: rgb(0, 0, 0);\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n.expression-btn_2 {\n  position: absolute;\n  right: 4%;\n  top: 63%;\n  padding: 12px 24px;\n  font-size: 20px;\n  width: 12%;\n  background-color: rgba(106, 240, 128, 0.9);\n  border: none;\n  border-radius: 25px;\n  color: rgb(0, 0, 0);\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n.expression-btn_3 {\n  position: absolute;\n  right: 12%;\n  top: 70%;\n  padding: 12px 24px;\n  font-size: 20px;\n  width: 10%;\n  background-color: rgba(106, 179, 240, 0.9);\n  border: none;\n  border-radius: 25px;\n  color: white;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}