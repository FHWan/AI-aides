{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n/*!\n * @pixi/accessibility - v6.5.10\n * Compiled Thu, 06 Jul 2023 15:25:11 UTC\n *\n * @pixi/accessibility is licensed under the MIT License.\n * http://www.opensource.org/licenses/mit-license\n */\nimport { DisplayObject } from '@pixi/display';\nimport { isMobile, removeItems } from '@pixi/utils';\nimport { ExtensionType } from '@pixi/core';\n\n/**\n * Default property values of accessible objects\n * used by {@link PIXI.AccessibilityManager}.\n * @private\n * @function accessibleTarget\n * @memberof PIXI\n * @type {object}\n * @example\n *      function MyObject() {}\n *\n *      Object.assign(\n *          MyObject.prototype,\n *          PIXI.accessibleTarget\n *      );\n */\nvar accessibleTarget = {\n  /**\n   *  Flag for if the object is accessible. If true AccessibilityManager will overlay a\n   *   shadow div with attributes set\n   * @member {boolean}\n   * @memberof PIXI.DisplayObject#\n   */\n  accessible: false,\n  /**\n   * Sets the title attribute of the shadow div\n   * If accessibleTitle AND accessibleHint has not been this will default to 'displayObject [tabIndex]'\n   * @member {?string}\n   * @memberof PIXI.DisplayObject#\n   */\n  accessibleTitle: null,\n  /**\n   * Sets the aria-label attribute of the shadow div\n   * @member {string}\n   * @memberof PIXI.DisplayObject#\n   */\n  accessibleHint: null,\n  /**\n   * @member {number}\n   * @memberof PIXI.DisplayObject#\n   * @private\n   * @todo Needs docs.\n   */\n  tabIndex: 0,\n  /**\n   * @member {boolean}\n   * @memberof PIXI.DisplayObject#\n   * @todo Needs docs.\n   */\n  _accessibleActive: false,\n  /**\n   * @member {boolean}\n   * @memberof PIXI.DisplayObject#\n   * @todo Needs docs.\n   */\n  _accessibleDiv: null,\n  /**\n   * Specify the type of div the accessible layer is. Screen readers treat the element differently\n   * depending on this type. Defaults to button.\n   * @member {string}\n   * @memberof PIXI.DisplayObject#\n   * @default 'button'\n   */\n  accessibleType: 'button',\n  /**\n   * Specify the pointer-events the accessible div will use\n   * Defaults to auto.\n   * @member {string}\n   * @memberof PIXI.DisplayObject#\n   * @default 'auto'\n   */\n  accessiblePointerEvents: 'auto',\n  /**\n   * Setting to false will prevent any children inside this container to\n   * be accessible. Defaults to true.\n   * @member {boolean}\n   * @memberof PIXI.DisplayObject#\n   * @default true\n   */\n  accessibleChildren: true,\n  renderId: -1\n};\n\n// add some extra variables to the container..\nDisplayObject.mixin(accessibleTarget);\nvar KEY_CODE_TAB = 9;\nvar DIV_TOUCH_SIZE = 100;\nvar DIV_TOUCH_POS_X = 0;\nvar DIV_TOUCH_POS_Y = 0;\nvar DIV_TOUCH_ZINDEX = 2;\nvar DIV_HOOK_SIZE = 1;\nvar DIV_HOOK_POS_X = -1000;\nvar DIV_HOOK_POS_Y = -1000;\nvar DIV_HOOK_ZINDEX = 2;\n/**\n * The Accessibility manager recreates the ability to tab and have content read by screen readers.\n * This is very important as it can possibly help people with disabilities access PixiJS content.\n *\n * A DisplayObject can be made accessible just like it can be made interactive. This manager will map the\n * events as if the mouse was being used, minimizing the effort required to implement.\n *\n * An instance of this class is automatically created by default, and can be found at `renderer.plugins.accessibility`\n * @class\n * @memberof PIXI\n */\nvar AccessibilityManager = /** @class */function () {\n  /**\n   * @param {PIXI.CanvasRenderer|PIXI.Renderer} renderer - A reference to the current renderer\n   */\n  function AccessibilityManager(renderer) {\n    /** Setting this to true will visually show the divs. */\n    this.debug = false;\n    /** Internal variable, see isActive getter. */\n    this._isActive = false;\n    /** Internal variable, see isMobileAccessibility getter. */\n    this._isMobileAccessibility = false;\n    /** A simple pool for storing divs. */\n    this.pool = [];\n    /** This is a tick used to check if an object is no longer being rendered. */\n    this.renderId = 0;\n    /** The array of currently active accessible items. */\n    this.children = [];\n    /** Count to throttle div updates on android devices. */\n    this.androidUpdateCount = 0;\n    /**  The frequency to update the div elements. */\n    this.androidUpdateFrequency = 500; // 2fps\n    this._hookDiv = null;\n    if (isMobile.tablet || isMobile.phone) {\n      this.createTouchHook();\n    }\n    // first we create a div that will sit over the PixiJS element. This is where the div overlays will go.\n    var div = document.createElement('div');\n    div.style.width = DIV_TOUCH_SIZE + \"px\";\n    div.style.height = DIV_TOUCH_SIZE + \"px\";\n    div.style.position = 'absolute';\n    div.style.top = DIV_TOUCH_POS_X + \"px\";\n    div.style.left = DIV_TOUCH_POS_Y + \"px\";\n    div.style.zIndex = DIV_TOUCH_ZINDEX.toString();\n    this.div = div;\n    this.renderer = renderer;\n    /**\n     * pre-bind the functions\n     * @type {Function}\n     * @private\n     */\n    this._onKeyDown = this._onKeyDown.bind(this);\n    /**\n     * pre-bind the functions\n     * @type {Function}\n     * @private\n     */\n    this._onMouseMove = this._onMouseMove.bind(this);\n    // let listen for tab.. once pressed we can fire up and show the accessibility layer\n    globalThis.addEventListener('keydown', this._onKeyDown, false);\n  }\n  Object.defineProperty(AccessibilityManager.prototype, \"isActive\", {\n    /**\n     * Value of `true` if accessibility is currently active and accessibility layers are showing.\n     * @member {boolean}\n     * @readonly\n     */\n    get: function () {\n      return this._isActive;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(AccessibilityManager.prototype, \"isMobileAccessibility\", {\n    /**\n     * Value of `true` if accessibility is enabled for touch devices.\n     * @member {boolean}\n     * @readonly\n     */\n    get: function () {\n      return this._isMobileAccessibility;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\n   * Creates the touch hooks.\n   * @private\n   */\n  AccessibilityManager.prototype.createTouchHook = function () {\n    var _this = this;\n    var hookDiv = document.createElement('button');\n    hookDiv.style.width = DIV_HOOK_SIZE + \"px\";\n    hookDiv.style.height = DIV_HOOK_SIZE + \"px\";\n    hookDiv.style.position = 'absolute';\n    hookDiv.style.top = DIV_HOOK_POS_X + \"px\";\n    hookDiv.style.left = DIV_HOOK_POS_Y + \"px\";\n    hookDiv.style.zIndex = DIV_HOOK_ZINDEX.toString();\n    hookDiv.style.backgroundColor = '#FF0000';\n    hookDiv.title = 'select to enable accessibility for this content';\n    hookDiv.addEventListener('focus', function () {\n      _this._isMobileAccessibility = true;\n      _this.activate();\n      _this.destroyTouchHook();\n    });\n    document.body.appendChild(hookDiv);\n    this._hookDiv = hookDiv;\n  };\n  /**\n   * Destroys the touch hooks.\n   * @private\n   */\n  AccessibilityManager.prototype.destroyTouchHook = function () {\n    if (!this._hookDiv) {\n      return;\n    }\n    document.body.removeChild(this._hookDiv);\n    this._hookDiv = null;\n  };\n  /**\n   * Activating will cause the Accessibility layer to be shown.\n   * This is called when a user presses the tab key.\n   * @private\n   */\n  AccessibilityManager.prototype.activate = function () {\n    var _a;\n    if (this._isActive) {\n      return;\n    }\n    this._isActive = true;\n    globalThis.document.addEventListener('mousemove', this._onMouseMove, true);\n    globalThis.removeEventListener('keydown', this._onKeyDown, false);\n    this.renderer.on('postrender', this.update, this);\n    (_a = this.renderer.view.parentNode) === null || _a === void 0 ? void 0 : _a.appendChild(this.div);\n  };\n  /**\n   * Deactivating will cause the Accessibility layer to be hidden.\n   * This is called when a user moves the mouse.\n   * @private\n   */\n  AccessibilityManager.prototype.deactivate = function () {\n    var _a;\n    if (!this._isActive || this._isMobileAccessibility) {\n      return;\n    }\n    this._isActive = false;\n    globalThis.document.removeEventListener('mousemove', this._onMouseMove, true);\n    globalThis.addEventListener('keydown', this._onKeyDown, false);\n    this.renderer.off('postrender', this.update);\n    (_a = this.div.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(this.div);\n  };\n  /**\n   * This recursive function will run through the scene graph and add any new accessible objects to the DOM layer.\n   * @private\n   * @param {PIXI.Container} displayObject - The DisplayObject to check.\n   */\n  AccessibilityManager.prototype.updateAccessibleObjects = function (displayObject) {\n    if (!displayObject.visible || !displayObject.accessibleChildren) {\n      return;\n    }\n    if (displayObject.accessible && displayObject.interactive) {\n      if (!displayObject._accessibleActive) {\n        this.addChild(displayObject);\n      }\n      displayObject.renderId = this.renderId;\n    }\n    var children = displayObject.children;\n    if (children) {\n      for (var i = 0; i < children.length; i++) {\n        this.updateAccessibleObjects(children[i]);\n      }\n    }\n  };\n  /**\n   * Before each render this function will ensure that all divs are mapped correctly to their DisplayObjects.\n   * @private\n   */\n  AccessibilityManager.prototype.update = function () {\n    /* On Android default web browser, tab order seems to be calculated by position rather than tabIndex,\n    *  moving buttons can cause focus to flicker between two buttons making it hard/impossible to navigate,\n    *  so I am just running update every half a second, seems to fix it.\n    */\n    var now = performance.now();\n    if (isMobile.android.device && now < this.androidUpdateCount) {\n      return;\n    }\n    this.androidUpdateCount = now + this.androidUpdateFrequency;\n    if (!this.renderer.renderingToScreen) {\n      return;\n    }\n    // update children...\n    if (this.renderer._lastObjectRendered) {\n      this.updateAccessibleObjects(this.renderer._lastObjectRendered);\n    }\n    var _a = this.renderer.view.getBoundingClientRect(),\n      left = _a.left,\n      top = _a.top,\n      width = _a.width,\n      height = _a.height;\n    var _b = this.renderer,\n      viewWidth = _b.width,\n      viewHeight = _b.height,\n      resolution = _b.resolution;\n    var sx = width / viewWidth * resolution;\n    var sy = height / viewHeight * resolution;\n    var div = this.div;\n    div.style.left = left + \"px\";\n    div.style.top = top + \"px\";\n    div.style.width = viewWidth + \"px\";\n    div.style.height = viewHeight + \"px\";\n    for (var i = 0; i < this.children.length; i++) {\n      var child = this.children[i];\n      if (child.renderId !== this.renderId) {\n        child._accessibleActive = false;\n        removeItems(this.children, i, 1);\n        this.div.removeChild(child._accessibleDiv);\n        this.pool.push(child._accessibleDiv);\n        child._accessibleDiv = null;\n        i--;\n      } else {\n        // map div to display..\n        div = child._accessibleDiv;\n        var hitArea = child.hitArea;\n        var wt = child.worldTransform;\n        if (child.hitArea) {\n          div.style.left = (wt.tx + hitArea.x * wt.a) * sx + \"px\";\n          div.style.top = (wt.ty + hitArea.y * wt.d) * sy + \"px\";\n          div.style.width = hitArea.width * wt.a * sx + \"px\";\n          div.style.height = hitArea.height * wt.d * sy + \"px\";\n        } else {\n          hitArea = child.getBounds();\n          this.capHitArea(hitArea);\n          div.style.left = hitArea.x * sx + \"px\";\n          div.style.top = hitArea.y * sy + \"px\";\n          div.style.width = hitArea.width * sx + \"px\";\n          div.style.height = hitArea.height * sy + \"px\";\n          // update button titles and hints if they exist and they've changed\n          if (div.title !== child.accessibleTitle && child.accessibleTitle !== null) {\n            div.title = child.accessibleTitle;\n          }\n          if (div.getAttribute('aria-label') !== child.accessibleHint && child.accessibleHint !== null) {\n            div.setAttribute('aria-label', child.accessibleHint);\n          }\n        }\n        // the title or index may have changed, if so lets update it!\n        if (child.accessibleTitle !== div.title || child.tabIndex !== div.tabIndex) {\n          div.title = child.accessibleTitle;\n          div.tabIndex = child.tabIndex;\n          if (this.debug) {\n            this.updateDebugHTML(div);\n          }\n        }\n      }\n    }\n    // increment the render id..\n    this.renderId++;\n  };\n  /**\n   * private function that will visually add the information to the\n   * accessability div\n   * @param {HTMLElement} div -\n   */\n  AccessibilityManager.prototype.updateDebugHTML = function (div) {\n    div.innerHTML = \"type: \" + div.type + \"</br> title : \" + div.title + \"</br> tabIndex: \" + div.tabIndex;\n  };\n  /**\n   * Adjust the hit area based on the bounds of a display object\n   * @param {PIXI.Rectangle} hitArea - Bounds of the child\n   */\n  AccessibilityManager.prototype.capHitArea = function (hitArea) {\n    if (hitArea.x < 0) {\n      hitArea.width += hitArea.x;\n      hitArea.x = 0;\n    }\n    if (hitArea.y < 0) {\n      hitArea.height += hitArea.y;\n      hitArea.y = 0;\n    }\n    var _a = this.renderer,\n      viewWidth = _a.width,\n      viewHeight = _a.height;\n    if (hitArea.x + hitArea.width > viewWidth) {\n      hitArea.width = viewWidth - hitArea.x;\n    }\n    if (hitArea.y + hitArea.height > viewHeight) {\n      hitArea.height = viewHeight - hitArea.y;\n    }\n  };\n  /**\n   * Adds a DisplayObject to the accessibility manager\n   * @private\n   * @param {PIXI.DisplayObject} displayObject - The child to make accessible.\n   */\n  AccessibilityManager.prototype.addChild = function (displayObject) {\n    //    this.activate();\n    var div = this.pool.pop();\n    if (!div) {\n      div = document.createElement('button');\n      div.style.width = DIV_TOUCH_SIZE + \"px\";\n      div.style.height = DIV_TOUCH_SIZE + \"px\";\n      div.style.backgroundColor = this.debug ? 'rgba(255,255,255,0.5)' : 'transparent';\n      div.style.position = 'absolute';\n      div.style.zIndex = DIV_TOUCH_ZINDEX.toString();\n      div.style.borderStyle = 'none';\n      // ARIA attributes ensure that button title and hint updates are announced properly\n      if (navigator.userAgent.toLowerCase().indexOf('chrome') > -1) {\n        // Chrome doesn't need aria-live to work as intended; in fact it just gets more confused.\n        div.setAttribute('aria-live', 'off');\n      } else {\n        div.setAttribute('aria-live', 'polite');\n      }\n      if (navigator.userAgent.match(/rv:.*Gecko\\//)) {\n        // FireFox needs this to announce only the new button name\n        div.setAttribute('aria-relevant', 'additions');\n      } else {\n        // required by IE, other browsers don't much care\n        div.setAttribute('aria-relevant', 'text');\n      }\n      div.addEventListener('click', this._onClick.bind(this));\n      div.addEventListener('focus', this._onFocus.bind(this));\n      div.addEventListener('focusout', this._onFocusOut.bind(this));\n    }\n    // set pointer events\n    div.style.pointerEvents = displayObject.accessiblePointerEvents;\n    // set the type, this defaults to button!\n    div.type = displayObject.accessibleType;\n    if (displayObject.accessibleTitle && displayObject.accessibleTitle !== null) {\n      div.title = displayObject.accessibleTitle;\n    } else if (!displayObject.accessibleHint || displayObject.accessibleHint === null) {\n      div.title = \"displayObject \" + displayObject.tabIndex;\n    }\n    if (displayObject.accessibleHint && displayObject.accessibleHint !== null) {\n      div.setAttribute('aria-label', displayObject.accessibleHint);\n    }\n    if (this.debug) {\n      this.updateDebugHTML(div);\n    }\n    displayObject._accessibleActive = true;\n    displayObject._accessibleDiv = div;\n    div.displayObject = displayObject;\n    this.children.push(displayObject);\n    this.div.appendChild(displayObject._accessibleDiv);\n    displayObject._accessibleDiv.tabIndex = displayObject.tabIndex;\n  };\n  /**\n   * Maps the div button press to pixi's InteractionManager (click)\n   * @private\n   * @param {MouseEvent} e - The click event.\n   */\n  AccessibilityManager.prototype._onClick = function (e) {\n    var interactionManager = this.renderer.plugins.interaction;\n    var displayObject = e.target.displayObject;\n    var eventData = interactionManager.eventData;\n    interactionManager.dispatchEvent(displayObject, 'click', eventData);\n    interactionManager.dispatchEvent(displayObject, 'pointertap', eventData);\n    interactionManager.dispatchEvent(displayObject, 'tap', eventData);\n  };\n  /**\n   * Maps the div focus events to pixi's InteractionManager (mouseover)\n   * @private\n   * @param {FocusEvent} e - The focus event.\n   */\n  AccessibilityManager.prototype._onFocus = function (e) {\n    if (!e.target.getAttribute('aria-live')) {\n      e.target.setAttribute('aria-live', 'assertive');\n    }\n    var interactionManager = this.renderer.plugins.interaction;\n    var displayObject = e.target.displayObject;\n    var eventData = interactionManager.eventData;\n    interactionManager.dispatchEvent(displayObject, 'mouseover', eventData);\n  };\n  /**\n   * Maps the div focus events to pixi's InteractionManager (mouseout)\n   * @private\n   * @param {FocusEvent} e - The focusout event.\n   */\n  AccessibilityManager.prototype._onFocusOut = function (e) {\n    if (!e.target.getAttribute('aria-live')) {\n      e.target.setAttribute('aria-live', 'polite');\n    }\n    var interactionManager = this.renderer.plugins.interaction;\n    var displayObject = e.target.displayObject;\n    var eventData = interactionManager.eventData;\n    interactionManager.dispatchEvent(displayObject, 'mouseout', eventData);\n  };\n  /**\n   * Is called when a key is pressed\n   * @private\n   * @param {KeyboardEvent} e - The keydown event.\n   */\n  AccessibilityManager.prototype._onKeyDown = function (e) {\n    if (e.keyCode !== KEY_CODE_TAB) {\n      return;\n    }\n    this.activate();\n  };\n  /**\n   * Is called when the mouse moves across the renderer element\n   * @private\n   * @param {MouseEvent} e - The mouse event.\n   */\n  AccessibilityManager.prototype._onMouseMove = function (e) {\n    if (e.movementX === 0 && e.movementY === 0) {\n      return;\n    }\n    this.deactivate();\n  };\n  /** Destroys the accessibility manager */\n  AccessibilityManager.prototype.destroy = function () {\n    this.destroyTouchHook();\n    this.div = null;\n    globalThis.document.removeEventListener('mousemove', this._onMouseMove, true);\n    globalThis.removeEventListener('keydown', this._onKeyDown);\n    this.pool = null;\n    this.children = null;\n    this.renderer = null;\n  };\n  /** @ignore */\n  AccessibilityManager.extension = {\n    name: 'accessibility',\n    type: [ExtensionType.RendererPlugin, ExtensionType.CanvasRendererPlugin]\n  };\n  return AccessibilityManager;\n}();\nexport { AccessibilityManager, accessibleTarget };","map":{"version":3,"names":["accessibleTarget","accessible","accessibleTitle","accessibleHint","tabIndex","_accessibleActive","_accessibleDiv","accessibleType","accessiblePointerEvents","accessibleChildren","renderId","DisplayObject","mixin","KEY_CODE_TAB","DIV_TOUCH_SIZE","DIV_TOUCH_POS_X","DIV_TOUCH_POS_Y","DIV_TOUCH_ZINDEX","DIV_HOOK_SIZE","DIV_HOOK_POS_X","DIV_HOOK_POS_Y","DIV_HOOK_ZINDEX","AccessibilityManager","renderer","debug","_isActive","_isMobileAccessibility","pool","children","androidUpdateCount","androidUpdateFrequency","_hookDiv","isMobile","tablet","phone","createTouchHook","div","document","createElement","style","width","height","position","top","left","zIndex","toString","_onKeyDown","bind","_onMouseMove","globalThis","addEventListener","Object","defineProperty","prototype","get","_this","hookDiv","backgroundColor","title","activate","destroyTouchHook","body","appendChild","removeChild","removeEventListener","on","update","_a","view","parentNode","deactivate","off","updateAccessibleObjects","displayObject","visible","interactive","addChild","i","length","now","performance","android","device","renderingToScreen","_lastObjectRendered","getBoundingClientRect","_b","viewWidth","viewHeight","resolution","sx","sy","child","removeItems","push","hitArea","wt","worldTransform","tx","x","a","ty","y","d","getBounds","capHitArea","getAttribute","setAttribute","updateDebugHTML","innerHTML","type","pop","borderStyle","navigator","userAgent","toLowerCase","indexOf","match","_onClick","_onFocus","_onFocusOut","pointerEvents","e","interactionManager","plugins","interaction","target","eventData","dispatchEvent","keyCode","movementX","movementY","destroy","extension","name","ExtensionType","RendererPlugin","CanvasRendererPlugin"],"sources":["../../src/accessibleTarget.ts","../../src/AccessibilityManager.ts"],"sourcesContent":["import type { DisplayObject } from '@pixi/display';\n\nexport type PointerEvents = 'auto'\n| 'none'\n| 'visiblePainted'\n| 'visibleFill'\n| 'visibleStroke'\n| 'visible'\n| 'painted'\n| 'fill'\n| 'stroke'\n| 'all'\n| 'inherit';\n\nexport interface IAccessibleTarget\n{\n    accessible: boolean;\n    accessibleTitle: string;\n    accessibleHint: string;\n    tabIndex: number;\n    _accessibleActive: boolean;\n    _accessibleDiv: IAccessibleHTMLElement;\n    accessibleType: string;\n    accessiblePointerEvents: PointerEvents;\n    accessibleChildren: boolean;\n    renderId: number;\n}\n\nexport interface IAccessibleHTMLElement extends HTMLElement\n{\n    type?: string;\n    displayObject?: DisplayObject;\n}\n\n/**\n * Default property values of accessible objects\n * used by {@link PIXI.AccessibilityManager}.\n * @private\n * @function accessibleTarget\n * @memberof PIXI\n * @type {object}\n * @example\n *      function MyObject() {}\n *\n *      Object.assign(\n *          MyObject.prototype,\n *          PIXI.accessibleTarget\n *      );\n */\nexport const accessibleTarget: IAccessibleTarget = {\n    /**\n     *  Flag for if the object is accessible. If true AccessibilityManager will overlay a\n     *   shadow div with attributes set\n     * @member {boolean}\n     * @memberof PIXI.DisplayObject#\n     */\n    accessible: false,\n\n    /**\n     * Sets the title attribute of the shadow div\n     * If accessibleTitle AND accessibleHint has not been this will default to 'displayObject [tabIndex]'\n     * @member {?string}\n     * @memberof PIXI.DisplayObject#\n     */\n    accessibleTitle: null,\n\n    /**\n     * Sets the aria-label attribute of the shadow div\n     * @member {string}\n     * @memberof PIXI.DisplayObject#\n     */\n    accessibleHint: null,\n\n    /**\n     * @member {number}\n     * @memberof PIXI.DisplayObject#\n     * @private\n     * @todo Needs docs.\n     */\n    tabIndex: 0,\n\n    /**\n     * @member {boolean}\n     * @memberof PIXI.DisplayObject#\n     * @todo Needs docs.\n     */\n    _accessibleActive: false,\n\n    /**\n     * @member {boolean}\n     * @memberof PIXI.DisplayObject#\n     * @todo Needs docs.\n     */\n    _accessibleDiv: null,\n\n    /**\n     * Specify the type of div the accessible layer is. Screen readers treat the element differently\n     * depending on this type. Defaults to button.\n     * @member {string}\n     * @memberof PIXI.DisplayObject#\n     * @default 'button'\n     */\n    accessibleType: 'button',\n\n    /**\n     * Specify the pointer-events the accessible div will use\n     * Defaults to auto.\n     * @member {string}\n     * @memberof PIXI.DisplayObject#\n     * @default 'auto'\n     */\n    accessiblePointerEvents: 'auto',\n\n    /**\n     * Setting to false will prevent any children inside this container to\n     * be accessible. Defaults to true.\n     * @member {boolean}\n     * @memberof PIXI.DisplayObject#\n     * @default true\n     */\n    accessibleChildren: true,\n\n    renderId: -1,\n};\n","import { DisplayObject } from '@pixi/display';\nimport { isMobile, removeItems } from '@pixi/utils';\nimport { accessibleTarget } from './accessibleTarget';\n\nimport type { Rectangle } from '@pixi/math';\nimport type { Container } from '@pixi/display';\nimport type { Renderer, AbstractRenderer, ExtensionMetadata } from '@pixi/core';\nimport { ExtensionType } from '@pixi/core';\nimport type { IAccessibleHTMLElement } from './accessibleTarget';\n\n// add some extra variables to the container..\nDisplayObject.mixin(accessibleTarget);\n\nconst KEY_CODE_TAB = 9;\n\nconst DIV_TOUCH_SIZE = 100;\nconst DIV_TOUCH_POS_X = 0;\nconst DIV_TOUCH_POS_Y = 0;\nconst DIV_TOUCH_ZINDEX = 2;\n\nconst DIV_HOOK_SIZE = 1;\nconst DIV_HOOK_POS_X = -1000;\nconst DIV_HOOK_POS_Y = -1000;\nconst DIV_HOOK_ZINDEX = 2;\n\n/**\n * The Accessibility manager recreates the ability to tab and have content read by screen readers.\n * This is very important as it can possibly help people with disabilities access PixiJS content.\n *\n * A DisplayObject can be made accessible just like it can be made interactive. This manager will map the\n * events as if the mouse was being used, minimizing the effort required to implement.\n *\n * An instance of this class is automatically created by default, and can be found at `renderer.plugins.accessibility`\n * @class\n * @memberof PIXI\n */\nexport class AccessibilityManager\n{\n    /** @ignore */\n    static extension: ExtensionMetadata = {\n        name: 'accessibility',\n        type: [\n            ExtensionType.RendererPlugin,\n            ExtensionType.CanvasRendererPlugin,\n        ],\n    };\n\n    /** Setting this to true will visually show the divs. */\n    public debug = false;\n\n    /**\n     * The renderer this accessibility manager works for.\n     * @type {PIXI.CanvasRenderer|PIXI.Renderer}\n     */\n    public renderer: AbstractRenderer | Renderer;\n\n    /** Internal variable, see isActive getter. */\n    private _isActive = false;\n\n    /** Internal variable, see isMobileAccessibility getter. */\n    private _isMobileAccessibility = false;\n\n    /** Button element for handling touch hooks. */\n    private _hookDiv: HTMLElement;\n\n    /** This is the dom element that will sit over the PixiJS element. This is where the div overlays will go. */\n    private div: HTMLElement;\n\n    /** A simple pool for storing divs. */\n    private pool: IAccessibleHTMLElement[] = [];\n\n    /** This is a tick used to check if an object is no longer being rendered. */\n    private renderId = 0;\n\n    /** The array of currently active accessible items. */\n    private children: DisplayObject[] = [];\n\n    /** Count to throttle div updates on android devices. */\n    private androidUpdateCount = 0;\n\n    /**  The frequency to update the div elements. */\n    private androidUpdateFrequency = 500; // 2fps\n\n    /**\n     * @param {PIXI.CanvasRenderer|PIXI.Renderer} renderer - A reference to the current renderer\n     */\n    constructor(renderer: AbstractRenderer | Renderer)\n    {\n        this._hookDiv = null;\n\n        if (isMobile.tablet || isMobile.phone)\n        {\n            this.createTouchHook();\n        }\n\n        // first we create a div that will sit over the PixiJS element. This is where the div overlays will go.\n        const div = document.createElement('div');\n\n        div.style.width = `${DIV_TOUCH_SIZE}px`;\n        div.style.height = `${DIV_TOUCH_SIZE}px`;\n        div.style.position = 'absolute';\n        div.style.top = `${DIV_TOUCH_POS_X}px`;\n        div.style.left = `${DIV_TOUCH_POS_Y}px`;\n        div.style.zIndex = DIV_TOUCH_ZINDEX.toString();\n\n        this.div = div;\n        this.renderer = renderer;\n\n        /**\n         * pre-bind the functions\n         * @type {Function}\n         * @private\n         */\n        this._onKeyDown = this._onKeyDown.bind(this);\n\n        /**\n         * pre-bind the functions\n         * @type {Function}\n         * @private\n         */\n        this._onMouseMove = this._onMouseMove.bind(this);\n\n        // let listen for tab.. once pressed we can fire up and show the accessibility layer\n        globalThis.addEventListener('keydown', this._onKeyDown, false);\n    }\n\n    /**\n     * Value of `true` if accessibility is currently active and accessibility layers are showing.\n     * @member {boolean}\n     * @readonly\n     */\n    get isActive(): boolean\n    {\n        return this._isActive;\n    }\n\n    /**\n     * Value of `true` if accessibility is enabled for touch devices.\n     * @member {boolean}\n     * @readonly\n     */\n    get isMobileAccessibility(): boolean\n    {\n        return this._isMobileAccessibility;\n    }\n\n    /**\n     * Creates the touch hooks.\n     * @private\n     */\n    private createTouchHook(): void\n    {\n        const hookDiv = document.createElement('button');\n\n        hookDiv.style.width = `${DIV_HOOK_SIZE}px`;\n        hookDiv.style.height = `${DIV_HOOK_SIZE}px`;\n        hookDiv.style.position = 'absolute';\n        hookDiv.style.top = `${DIV_HOOK_POS_X}px`;\n        hookDiv.style.left = `${DIV_HOOK_POS_Y}px`;\n        hookDiv.style.zIndex = DIV_HOOK_ZINDEX.toString();\n        hookDiv.style.backgroundColor = '#FF0000';\n        hookDiv.title = 'select to enable accessibility for this content';\n\n        hookDiv.addEventListener('focus', () =>\n        {\n            this._isMobileAccessibility = true;\n            this.activate();\n            this.destroyTouchHook();\n        });\n\n        document.body.appendChild(hookDiv);\n        this._hookDiv = hookDiv;\n    }\n\n    /**\n     * Destroys the touch hooks.\n     * @private\n     */\n    private destroyTouchHook(): void\n    {\n        if (!this._hookDiv)\n        {\n            return;\n        }\n        document.body.removeChild(this._hookDiv);\n        this._hookDiv = null;\n    }\n\n    /**\n     * Activating will cause the Accessibility layer to be shown.\n     * This is called when a user presses the tab key.\n     * @private\n     */\n    private activate(): void\n    {\n        if (this._isActive)\n        {\n            return;\n        }\n\n        this._isActive = true;\n\n        globalThis.document.addEventListener('mousemove', this._onMouseMove, true);\n        globalThis.removeEventListener('keydown', this._onKeyDown, false);\n\n        this.renderer.on('postrender', this.update, this);\n        this.renderer.view.parentNode?.appendChild(this.div);\n    }\n\n    /**\n     * Deactivating will cause the Accessibility layer to be hidden.\n     * This is called when a user moves the mouse.\n     * @private\n     */\n    private deactivate(): void\n    {\n        if (!this._isActive || this._isMobileAccessibility)\n        {\n            return;\n        }\n\n        this._isActive = false;\n\n        globalThis.document.removeEventListener('mousemove', this._onMouseMove, true);\n        globalThis.addEventListener('keydown', this._onKeyDown, false);\n\n        this.renderer.off('postrender', this.update);\n        this.div.parentNode?.removeChild(this.div);\n    }\n\n    /**\n     * This recursive function will run through the scene graph and add any new accessible objects to the DOM layer.\n     * @private\n     * @param {PIXI.Container} displayObject - The DisplayObject to check.\n     */\n    private updateAccessibleObjects(displayObject: Container): void\n    {\n        if (!displayObject.visible || !displayObject.accessibleChildren)\n        {\n            return;\n        }\n\n        if (displayObject.accessible && displayObject.interactive)\n        {\n            if (!displayObject._accessibleActive)\n            {\n                this.addChild(displayObject);\n            }\n\n            displayObject.renderId = this.renderId;\n        }\n\n        const children = displayObject.children;\n\n        if (children)\n        {\n            for (let i = 0; i < children.length; i++)\n            {\n                this.updateAccessibleObjects(children[i] as Container);\n            }\n        }\n    }\n\n    /**\n     * Before each render this function will ensure that all divs are mapped correctly to their DisplayObjects.\n     * @private\n     */\n    private update(): void\n    {\n        /* On Android default web browser, tab order seems to be calculated by position rather than tabIndex,\n        *  moving buttons can cause focus to flicker between two buttons making it hard/impossible to navigate,\n        *  so I am just running update every half a second, seems to fix it.\n        */\n        const now = performance.now();\n\n        if (isMobile.android.device && now < this.androidUpdateCount)\n        {\n            return;\n        }\n\n        this.androidUpdateCount = now + this.androidUpdateFrequency;\n\n        if (!(this.renderer as Renderer).renderingToScreen)\n        {\n            return;\n        }\n\n        // update children...\n        if (this.renderer._lastObjectRendered)\n        {\n            this.updateAccessibleObjects(this.renderer._lastObjectRendered as Container);\n        }\n\n        const { left, top, width, height } = this.renderer.view.getBoundingClientRect();\n        const { width: viewWidth, height: viewHeight, resolution } = this.renderer;\n\n        const sx = (width / viewWidth) * resolution;\n        const sy = (height / viewHeight) * resolution;\n\n        let div = this.div;\n\n        div.style.left = `${left}px`;\n        div.style.top = `${top}px`;\n        div.style.width = `${viewWidth}px`;\n        div.style.height = `${viewHeight}px`;\n\n        for (let i = 0; i < this.children.length; i++)\n        {\n            const child = this.children[i];\n\n            if (child.renderId !== this.renderId)\n            {\n                child._accessibleActive = false;\n\n                removeItems(this.children, i, 1);\n                this.div.removeChild(child._accessibleDiv);\n                this.pool.push(child._accessibleDiv);\n                child._accessibleDiv = null;\n\n                i--;\n            }\n            else\n            {\n                // map div to display..\n                div = child._accessibleDiv;\n                let hitArea = child.hitArea as Rectangle;\n                const wt = child.worldTransform;\n\n                if (child.hitArea)\n                {\n                    div.style.left = `${(wt.tx + (hitArea.x * wt.a)) * sx}px`;\n                    div.style.top = `${(wt.ty + (hitArea.y * wt.d)) * sy}px`;\n\n                    div.style.width = `${hitArea.width * wt.a * sx}px`;\n                    div.style.height = `${hitArea.height * wt.d * sy}px`;\n                }\n                else\n                {\n                    hitArea = child.getBounds();\n\n                    this.capHitArea(hitArea);\n\n                    div.style.left = `${hitArea.x * sx}px`;\n                    div.style.top = `${hitArea.y * sy}px`;\n\n                    div.style.width = `${hitArea.width * sx}px`;\n                    div.style.height = `${hitArea.height * sy}px`;\n\n                    // update button titles and hints if they exist and they've changed\n                    if (div.title !== child.accessibleTitle && child.accessibleTitle !== null)\n                    {\n                        div.title = child.accessibleTitle;\n                    }\n                    if (div.getAttribute('aria-label') !== child.accessibleHint\n                        && child.accessibleHint !== null)\n                    {\n                        div.setAttribute('aria-label', child.accessibleHint);\n                    }\n                }\n\n                // the title or index may have changed, if so lets update it!\n                if (child.accessibleTitle !== div.title || child.tabIndex !== div.tabIndex)\n                {\n                    div.title = child.accessibleTitle;\n                    div.tabIndex = child.tabIndex;\n                    if (this.debug) this.updateDebugHTML(div);\n                }\n            }\n        }\n\n        // increment the render id..\n        this.renderId++;\n    }\n\n    /**\n     * private function that will visually add the information to the\n     * accessability div\n     * @param {HTMLElement} div -\n     */\n    public updateDebugHTML(div: IAccessibleHTMLElement): void\n    {\n        div.innerHTML = `type: ${div.type}</br> title : ${div.title}</br> tabIndex: ${div.tabIndex}`;\n    }\n\n    /**\n     * Adjust the hit area based on the bounds of a display object\n     * @param {PIXI.Rectangle} hitArea - Bounds of the child\n     */\n    public capHitArea(hitArea: Rectangle): void\n    {\n        if (hitArea.x < 0)\n        {\n            hitArea.width += hitArea.x;\n            hitArea.x = 0;\n        }\n\n        if (hitArea.y < 0)\n        {\n            hitArea.height += hitArea.y;\n            hitArea.y = 0;\n        }\n\n        const { width: viewWidth, height: viewHeight } = this.renderer;\n\n        if (hitArea.x + hitArea.width > viewWidth)\n        {\n            hitArea.width = viewWidth - hitArea.x;\n        }\n\n        if (hitArea.y + hitArea.height > viewHeight)\n        {\n            hitArea.height = viewHeight - hitArea.y;\n        }\n    }\n\n    /**\n     * Adds a DisplayObject to the accessibility manager\n     * @private\n     * @param {PIXI.DisplayObject} displayObject - The child to make accessible.\n     */\n    private addChild<T extends DisplayObject>(displayObject: T): void\n    {\n        //    this.activate();\n\n        let div = this.pool.pop();\n\n        if (!div)\n        {\n            div = document.createElement('button');\n\n            div.style.width = `${DIV_TOUCH_SIZE}px`;\n            div.style.height = `${DIV_TOUCH_SIZE}px`;\n            div.style.backgroundColor = this.debug ? 'rgba(255,255,255,0.5)' : 'transparent';\n            div.style.position = 'absolute';\n            div.style.zIndex = DIV_TOUCH_ZINDEX.toString();\n            div.style.borderStyle = 'none';\n\n            // ARIA attributes ensure that button title and hint updates are announced properly\n            if (navigator.userAgent.toLowerCase().indexOf('chrome') > -1)\n            {\n                // Chrome doesn't need aria-live to work as intended; in fact it just gets more confused.\n                div.setAttribute('aria-live', 'off');\n            }\n            else\n            {\n                div.setAttribute('aria-live', 'polite');\n            }\n\n            if (navigator.userAgent.match(/rv:.*Gecko\\//))\n            {\n                // FireFox needs this to announce only the new button name\n                div.setAttribute('aria-relevant', 'additions');\n            }\n            else\n            {\n                // required by IE, other browsers don't much care\n                div.setAttribute('aria-relevant', 'text');\n            }\n\n            div.addEventListener('click', this._onClick.bind(this));\n            div.addEventListener('focus', this._onFocus.bind(this));\n            div.addEventListener('focusout', this._onFocusOut.bind(this));\n        }\n\n        // set pointer events\n        div.style.pointerEvents = displayObject.accessiblePointerEvents;\n        // set the type, this defaults to button!\n        div.type = displayObject.accessibleType;\n\n        if (displayObject.accessibleTitle && displayObject.accessibleTitle !== null)\n        {\n            div.title = displayObject.accessibleTitle;\n        }\n        else if (!displayObject.accessibleHint\n                 || displayObject.accessibleHint === null)\n        {\n            div.title = `displayObject ${displayObject.tabIndex}`;\n        }\n\n        if (displayObject.accessibleHint\n            && displayObject.accessibleHint !== null)\n        {\n            div.setAttribute('aria-label', displayObject.accessibleHint);\n        }\n\n        if (this.debug) this.updateDebugHTML(div);\n\n        displayObject._accessibleActive = true;\n        displayObject._accessibleDiv = div;\n        div.displayObject = displayObject;\n\n        this.children.push(displayObject);\n        this.div.appendChild(displayObject._accessibleDiv);\n        displayObject._accessibleDiv.tabIndex = displayObject.tabIndex;\n    }\n\n    /**\n     * Maps the div button press to pixi's InteractionManager (click)\n     * @private\n     * @param {MouseEvent} e - The click event.\n     */\n    private _onClick(e: MouseEvent): void\n    {\n        const interactionManager = this.renderer.plugins.interaction;\n        const { displayObject } = e.target as IAccessibleHTMLElement;\n        const { eventData } = interactionManager;\n\n        interactionManager.dispatchEvent(displayObject, 'click', eventData);\n        interactionManager.dispatchEvent(displayObject, 'pointertap', eventData);\n        interactionManager.dispatchEvent(displayObject, 'tap', eventData);\n    }\n\n    /**\n     * Maps the div focus events to pixi's InteractionManager (mouseover)\n     * @private\n     * @param {FocusEvent} e - The focus event.\n     */\n    private _onFocus(e: FocusEvent): void\n    {\n        if (!(e.target as Element).getAttribute('aria-live'))\n        {\n            (e.target as Element).setAttribute('aria-live', 'assertive');\n        }\n\n        const interactionManager = this.renderer.plugins.interaction;\n        const { displayObject } = e.target as IAccessibleHTMLElement;\n        const { eventData } = interactionManager;\n\n        interactionManager.dispatchEvent(displayObject, 'mouseover', eventData);\n    }\n\n    /**\n     * Maps the div focus events to pixi's InteractionManager (mouseout)\n     * @private\n     * @param {FocusEvent} e - The focusout event.\n     */\n    private _onFocusOut(e: FocusEvent): void\n    {\n        if (!(e.target as Element).getAttribute('aria-live'))\n        {\n            (e.target as Element).setAttribute('aria-live', 'polite');\n        }\n\n        const interactionManager = this.renderer.plugins.interaction;\n        const { displayObject } = e.target as IAccessibleHTMLElement;\n        const { eventData } = interactionManager;\n\n        interactionManager.dispatchEvent(displayObject, 'mouseout', eventData);\n    }\n\n    /**\n     * Is called when a key is pressed\n     * @private\n     * @param {KeyboardEvent} e - The keydown event.\n     */\n    private _onKeyDown(e: KeyboardEvent): void\n    {\n        if (e.keyCode !== KEY_CODE_TAB)\n        {\n            return;\n        }\n\n        this.activate();\n    }\n\n    /**\n     * Is called when the mouse moves across the renderer element\n     * @private\n     * @param {MouseEvent} e - The mouse event.\n     */\n    private _onMouseMove(e: MouseEvent): void\n    {\n        if (e.movementX === 0 && e.movementY === 0)\n        {\n            return;\n        }\n\n        this.deactivate();\n    }\n\n    /** Destroys the accessibility manager */\n    public destroy(): void\n    {\n        this.destroyTouchHook();\n        this.div = null;\n\n        globalThis.document.removeEventListener('mousemove', this._onMouseMove, true);\n        globalThis.removeEventListener('keydown', this._onKeyDown);\n\n        this.pool = null;\n        this.children = null;\n        this.renderer = null;\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}